{"mappings":"AAAA;;;;;;;;;;;CAWC,GACD,SAAS,gBAAgB,CAAC,oBAAoB;IAC1C,IAAI;QACA,gBAAgB;QAChB,MAAM,WAAW,MAAM,MAAM;QAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,6BAA6B;QAC7B,MAAM,SAAS,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;QACjD,MAAM,UAAU,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;QAElD,oCAAoC;QACpC,MAAM,YAAY,OACb,IAAI,CAAC,CAAC,GAAG,IAAM,OAAO,EAAE,eAAe,IAAI,OAAO,EAAE,eAAe,GACnE,KAAK,CAAC,GAAG;QACd,MAAM,aAAa,QACd,IAAI,CAAC,CAAC,GAAG,IAAM,OAAO,EAAE,eAAe,IAAI,OAAO,EAAE,eAAe,GACnE,KAAK,CAAC,GAAG;QAEd,qBAAqB;QACrB,MAAM,SAAS;YAAC;YAAW;YAAW;YAAW;YAAW;YAAW;YAAW;YAAW;YAAW;YAAW;SAAU;QAE7H,aAAa;QACb,IAAI,MAAM,SAAS,cAAc,CAAC,cAAc;YAC5C,MAAM;YACN,MAAM;gBACF,QAAQ,UAAU,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI;gBACvC,UAAU;oBAAC;wBACP,OAAO;wBACP,MAAM,UAAU,GAAG,CAAC,CAAA,OAAQ,KAAK,eAAe;wBAChD,iBAAiB;oBACrB;iBAAE;YACN;YACA,SAAS;gBACL,YAAY;gBACZ,QAAQ;oBACJ,GAAG;wBAAE,aAAa;oBAAK;gBAC3B;YACJ;QACJ;QAEA,gBAAgB;QAChB,IAAI,MAAM,SAAS,cAAc,CAAC,iBAAiB;YAC/C,MAAM;YACN,MAAM;gBACF,QAAQ,WAAW,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI;gBACxC,UAAU;oBAAC;wBACP,OAAO;wBACP,MAAM,WAAW,GAAG,CAAC,CAAA,OAAQ,KAAK,eAAe;wBACjD,iBAAiB;oBACrB;iBAAE;YACN;YACA,SAAS;gBACL,YAAY;gBACZ,QAAQ;oBACJ,GAAG;wBAAE,aAAa;oBAAK;gBAC3B;YACJ;QACJ;IAEJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,gCAA6B;IAC/C;AACJ","sources":["src/diagram.js"],"sourcesContent":["/**\n * Initierar diagrammen för kurser och program genom att hämta data från en extern källa,\n * filtrera och sortera datan och sedan skapa ett stapeldiagram för de mest sökta kurserna \n * samt ett cirkeldiagram för de mest sökta programmen med chart.js.\n *\n * Data hämtas asynkront från en extern URL som förväntas returnera json data med objekt\n * som innehåller egenskaperna type, name, applicantsTotal osv\n *\n * @async\n * @function initCharts\n * @returns {Promise<void>} ett promise som löses när diagrammen har skapats.\n */\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n    try {\n        //länk till json\n        const response = await fetch('https://studenter.miun.se/~mallar/dt211g/');\n        const data = await response.json();\n\n        //filtrera kurser och program\n        const kurser = data.filter(item => item.type === \"Kurs\");\n        const program = data.filter(item => item.type === \"Program\");\n\n        //sortera efter flest totala sökande\n        const topKurser = kurser\n            .sort((a, b) => Number(b.applicantsTotal) - Number(a.applicantsTotal))\n            .slice(0, 10);\n        const topProgram = program\n            .sort((a, b) => Number(b.applicantsTotal) - Number(a.applicantsTotal))\n            .slice(0, 10);\n\n        //färger till diagram\n        const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4CAF50', '#9C27B0', '#FF9800', '#8BC34A', '#00ACC1', '#795548', '#607D8B'];\n\n        //kursdiagram\n        new Chart(document.getElementById('kursChart'), {\n            type: 'bar',\n            data: {\n                labels: topKurser.map(kurs => kurs.name),\n                datasets: [{\n                    label: 'Totalt antal sökande',\n                    data: topKurser.map(kurs => kurs.applicantsTotal),\n                    backgroundColor: colors\n                }]\n            },\n            options: {\n                responsive: true,\n                scales: {\n                    y: { beginAtZero: true }\n                }\n            }\n        });\n\n        //programdiagram\n        new Chart(document.getElementById('programChart'), {\n            type: 'pie',\n            data: {\n                labels: topProgram.map(prog => prog.name),\n                datasets: [{\n                    label: 'Totalt antal sökande',\n                    data: topProgram.map(prog => prog.applicantsTotal),\n                    backgroundColor: colors\n                }]\n            },\n            options: {\n                responsive: true,\n                scales: {\n                    y: { beginAtZero: true }\n                }\n            }\n        });\n\n    } catch (error) {\n        console.error(\"Fel vid hämtning av data:\", error);\n    }\n});\n"],"names":[],"version":3,"file":"diagram.7b595457.js.map","sourceRoot":"/__parcel_source_root/"}